# High-Frequency Trading (HFT) Simulator
The High-Frequency Trading (HFT) Simulator is an open-source project designed to simulate crypto high-frequency trading strategies 

## Architecture

The HFT Simulator is built using a modular and scalable multithreaded architecture, taking inspiration from the Disruptor pattern, which enables high-performance, low-latency event processing. This architecture ensures efficient handling of market data updates, order matching, and trading execution, leveraging parallelism and core affinity to maximize performance.

By assigning hot threads, such as the matching engine and strategy threads, to specific cores, the simulator aims to keep the CPU caches "hot" with the relevant data, improving cache utilization and reducing memory latency.

### Components

#### Feed Handlers
The Feed Handlers component is responsible for subscribing to order books and receiving raw exchange data via WebSockets or other data feed protocols. The feed handlers efficiently parse the incoming data and push it to the internal message queue for further processing. By leveraging optimized parsing techniques and utilizing kernel bypass technology, the feed handlers ensure fast and reliable ingestion of market data.

The Feed Handlers component efficiently handles multiple symbols subscribed to exchanges' WebSocket by employing a single-threaded event loop. Instead of dedicating a separate thread for each symbol, the simulator utilizes a single thread that manages the WebSocket connection and handles incoming messages for all subscribed symbols.

#### Matching Thread
The Matching Thread component plays a crucial role in the simulation by reading the market data from the internal message queue. It builds and maintains an order book for each subscribed symbol, keeping them in memory for efficient order matching. The matching thread continuously matches the incoming exchange order book updates with the simulated orders generated by the strategy thread. It handles order execution, order cancellations, and updates the simulated order book accordingly.

#### Strategy Thread
The Strategy Thread component represents the simulated HFT strategy and senting orders to be matched.

![Screenshot from 2023-05-22 23-35-32](https://github.com/Naseefabu/HFTRepo/assets/104965020/479f4cfb-9ca7-44ba-a35f-8026d49ebc05)


## Future Performance Improvements
The HFT Simulator is designed with future performance enhancements in mind. Here are some areas where further optimizations can be explored:

### Kernel Bypass Technology
To achieve even lower latency and higher throughput, the simulator can leverage kernel bypass technology. This technology allows direct data transfer from the Network Interface Card (NIC) to userspace 

### SIMD for JSON Parsing
To enhance parsing efficiency, the simulator can leverage Single Instruction, Multiple Data (SIMD) instructions available in modern processors. 

### ISOLCPUS and Thread Isolation
ISOLCPUS allows for isolating specific CPU cores exclusively for specific tasks, ensuring that no other user-level threads can run on those cores. By dedicating CPU cores solely to the HFT Simulator's critical threads, it reduces contention and interference from other processes, enhancing overall performance and predictability. 


# Build Instructions

### Install dependencies

```
# install dependent packages
sudo apt-get update
sudo apt-get install libboost-all-dev


# install cmake
sudo apt install cmake

# install boost 1.79
wget https://www.boost.org/users/history/version_1_79_0.html
tar --bzip2 -xf boost_1_79_0.tar.bz2
cd boost_1_79_0/
./boostrap.sh
./b2
sudo ./b2 install
```

steps to build and run the simulator :
```
git clone --recurse-submodules https://github.com/Naseefabu/HFTRepo.git
cd HFTSimulator
rm -rf build
mkdir build
cd build
cmake ..
make
./HFTSim

```